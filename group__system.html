<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>libDaisy: SYSTEM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libDaisy
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SYSTEM<div class="ingroups"><a class="el" href="group__libdaisy.html">LIBDAISY</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Deals with system. DMA, clocks, etc.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7c62c5b1a9ac157a3752d6dfb296596c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga7c62c5b1a9ac157a3752d6dfb296596c">dsy_dma_init</a> (void)</td></tr>
<tr class="separator:ga7c62c5b1a9ac157a3752d6dfb296596c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga925b1db78b1a6747c0eb2862d70040c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga925b1db78b1a6747c0eb2862d70040c8">dsy_dma_clear_cache_for_buffer</a> (uint8_t *buffer, size_t size)</td></tr>
<tr class="separator:ga925b1db78b1a6747c0eb2862d70040c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f0b7eae521c107641f2a43b6a9a3fae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga0f0b7eae521c107641f2a43b6a9a3fae">dsy_dma_invalidate_cache_for_buffer</a> (uint8_t *buffer, size_t size)</td></tr>
<tr class="separator:ga0f0b7eae521c107641f2a43b6a9a3fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f716c6e9bab13116849c2145cc3d35a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga0f716c6e9bab13116849c2145cc3d35a">dsy_system_init</a> ()</td></tr>
<tr class="separator:ga0f716c6e9bab13116849c2145cc3d35a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53510a60ba936014b5cd77b23b61ccc8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga53510a60ba936014b5cd77b23b61ccc8">dsy_system_jumpto</a> (uint32_t addr)</td></tr>
<tr class="separator:ga53510a60ba936014b5cd77b23b61ccc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48cb2251c3a25e8de3d971677922ba50"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga48cb2251c3a25e8de3d971677922ba50">dsy_system_jumptoqspi</a> ()</td></tr>
<tr class="separator:ga48cb2251c3a25e8de3d971677922ba50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga432c530c865525bea449446f08e31de4"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#ga432c530c865525bea449446f08e31de4">dsy_system_getnow</a> ()</td></tr>
<tr class="separator:ga432c530c865525bea449446f08e31de4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb7496cd6dea55f0fee6e3eb707bac52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__system.html#gabb7496cd6dea55f0fee6e3eb707bac52">dsy_system_delay</a> (uint32_t delay_ms)</td></tr>
<tr class="separator:gabb7496cd6dea55f0fee6e3eb707bac52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Deals with system. DMA, clocks, etc. </p>
<p>Low level System Configuration </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga925b1db78b1a6747c0eb2862d70040c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsy_dma_clear_cache_for_buffer </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DMA transfers require the buffers to be excluded from the cache because the DMA reads / writes directly to the SRAM whereas the processor itself accesses the cache. Otherwise the DMA will access whatever is in the SRAM at the time which may not be in sync with the data in the cache - resulting in wrong data transmitted / received. You can place buffers in the D2 memory domain, in a section that has the cache disabled like this: uint8_t DMA_BUFFER_MEM_SECTION my_buffer[100]; If this is not possible for some reason, call this function to clear the cache (write cache contents to SRAM if required) before starting to transmit data via the DMA. </p>

</div>
</div>
<a class="anchor" id="ga7c62c5b1a9ac157a3752d6dfb296596c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsy_dma_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the Direct Memory Access Peripheral used by many internal elements of libdaisy. Initializes the DMA (specifically for the modules used within the library) </p>

</div>
</div>
<a class="anchor" id="ga0f0b7eae521c107641f2a43b6a9a3fae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsy_dma_invalidate_cache_for_buffer </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>DMA transfers require the buffers to be excluded from the cache because the DMA reads / writes directly to the SRAM whereas the processor itself accesses the cache. Otherwise the DMA will access whatever is in the SRAM at the time which may not be in sync with the data in the cache - resulting in wrong data transmitted / received. You can place buffers in the D2 memory domain, in a section that has the cache disabled like this: uint8_t DMA_BUFFER_MEM_SECTION my_buffer[100]; If this is not possible for some reason, call this function to invalidate the cache (read SRAM contents to cache if required) after reading data from peripherals via the DMA. </p>

</div>
</div>
<a class="anchor" id="gabb7496cd6dea55f0fee6e3eb707bac52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsy_system_delay </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delay_ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Blocking Delay that uses the SysTick (1ms callback) to wait. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delay_ms</td><td>Time to delay in ms </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga432c530c865525bea449446f08e31de4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t dsy_system_getnow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>a uint32_t value of milliseconds since the SysTick started <br />
 Note! This is a HAL_GetTick() </dd></dl>

</div>
</div>
<a class="anchor" id="ga0f716c6e9bab13116849c2145cc3d35a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsy_system_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes Clock tree, MPU, and internal memories voltage regulators. This function <em>must</em> be called at the beginning of any program using libdaisy Higher level daisy_ files call this through the DaisySeed object. </p>

</div>
</div>
<a class="anchor" id="ga53510a60ba936014b5cd77b23b61ccc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsy_system_jumpto </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Jump to an address within the internal memory <br />
 This may not work correctly, and may not be very useful with the single sector of memory on the stm32h750** </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>Address to jump to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga48cb2251c3a25e8de3d971677922ba50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dsy_system_jumptoqspi </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Jumps to the first address of the external flash chip (0x90000000) If there is no code there, the chip will likely fall through to the while() loop TODO: Documentation/Loader for using external flash coming soon. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
